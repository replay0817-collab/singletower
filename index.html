<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì‹±ê¸€íƒ€ì›Œ ì•±</title>
    <style>
        :root {
            /* ì”ë”” ìƒ‰ìƒ: ë…¹ìƒ‰ + ì§„ì—°ë‘ìƒ‰ */
            --grass-light: #7cfc00; 
            --grass-dark: #228b22;
            --header-bg: #333333;
            --white: #ffffff;
            --active-scale: scale(0.95);
        }

        * {
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            margin: 0; padding: 0;
        }

        body, html {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background-color: #000; /* ì™¸ë¶€ ì—¬ë°± ì²˜ë¦¬ */
        }

        /* 9:16 ëª¨ë°”ì¼ ìµœì í™” ì»¨í…Œì´ë„ˆ */
        #app-viewport {
            width: 100vw;
            height: 100vh;
            max-width: 56.25vh; /* 9:16 ë¹„ìœ¨ ê°•ì œ */
            margin: 0 auto;
            position: relative;
            display: flex;
            flex-direction: column;
            /* ì‹¤ì œ ì”ë””ì²˜ëŸ¼ ìƒ‰ìƒ ë³€í™” íš¨ê³¼ (ê·¸ë¼ë°ì´ì…˜) */
            background: linear-gradient(135deg, var(--grass-light) 0%, var(--grass-dark) 100%);
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }

        /* ê´€ë¦¬ì ì „í™˜ ë²„íŠ¼ */
        .mode-switcher {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            padding: 8px 12px;
            background: rgba(255,255,255,0.8);
            border: none;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        /* í™ˆ ë©”ì¸ ì˜ì—­ (3ì—´ ë°°ì¹˜ ê³ ì •) */
        .main-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            padding-bottom: 90px; /* í•˜ë‹¨ë°” ë†’ì´ë§Œí¼ ì—¬ë°± */
            display: grid;
            grid-template-columns: repeat(3, 1fr); /* 3ê°œì”© ë°°ì¹˜ */
            gap: 15px;
            align-content: start;
        }

        /* ë¸”ë¡ ìŠ¤íƒ€ì¼ */
        .tower-block {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            transition: transform 0.1s ease;
            cursor: pointer;
        }

        .tower-block:active {
            transform: var(--active-scale);
        }

        .img-wrapper {
            width: 100%;
            aspect-ratio: 1 / 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            background: transparent; /* í‰ì†Œì—” íˆ¬ëª… */
        }

        /* ê´€ë¦¬ì ëª¨ë“œ ì‹œ ë¸”ë¡ í…Œë‘ë¦¬ í‘œì‹œ */
        .admin-active .img-wrapper {
            border: 1px dashed rgba(255,255,255,0.5);
            background: rgba(255,255,255,0.1);
        }

        .tower-block img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .tower-label {
            margin-top: 5px;
            font-size: 11px;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            text-align: center;
            min-height: 1.2em;
        }

        /* í•˜ë‹¨ ê³ ì • ë„¤ë¹„ê²Œì´ì…˜ (í—¤ë”) */
        .bottom-nav {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 75px;
            background-color: var(--header-bg);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding-bottom: env(safe-area-inset-bottom);
            z-index: 999;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #999;
            text-decoration: none;
            transition: all 0.2s;
        }

        .nav-item.active { color: var(--white); }

        .nav-item:active {
            transform: var(--active-scale);
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .nav-text {
            font-size: 10px;
        }

        /* ê´€ë¦¬ì ìˆ˜ì • íŒ¨ë„ */
        #admin-panel {
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            z-index: 2000;
            width: 80%;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        #admin-panel input {
            width: 100%; margin-bottom: 10px; padding: 10px;
        }

        .hidden { display: none !important; }

    </style>
</head>
<body>

<div id="app-viewport">
    <button class="mode-switcher" onclick="toggleMode()">ê´€ë¦¬ì ëª¨ë“œ ì „í™˜</button>

    <div class="main-content" id="mainGrid">
        </div>

    <nav class="bottom-nav">
        <a href="#" class="nav-item">
            <div class="nav-icon">ğŸ“œ</div>
            <div class="nav-text">ì‹±ê¸€ë°±ì„œ</div>
        </a>
        <a href="#" class="nav-item">
            <div class="nav-icon">âœï¸</div>
            <div class="nav-text">ë§ˆì´ê¸€</div>
        </a>
        <a href="#" class="nav-item">
            <div class="nav-icon">ğŸ’¬</div>
            <div class="nav-text">ì±„íŒ…ëª©ë¡</div>
        </a>
        <a href="#" class="nav-item">
            <div class="nav-icon">âš™ï¸</div>
            <div class="nav-text">ì„¤ì •</div>
        </a>
    </nav>
</div>

<div id="admin-panel">
    <h4 id="panel-title">ë¸”ë¡ í¸ì§‘</h4>
    <input type="text" id="input-text" placeholder="ë¬¸êµ¬ ì…ë ¥">
    <input type="text" id="input-link" placeholder="ì—°ê²° URL (https://...)">
    <div style="display:flex; gap:5px;">
        <button onclick="saveEdit()" style="flex:1; padding:10px;">ì €ì¥</button>
        <button onclick="closePanel()" style="flex:1; padding:10px;">ì·¨ì†Œ</button>
    </div>
</div>

<script>
    let isAdmin = false;
    let selectedIdx = null;

    // ì´ˆê¸° ë°ì´í„° êµ¬ì„± (ì´ 36ê°œ - 12í–‰ x 3ì—´)
    const blocks = Array.from({ length: 36 }, (_, i) => ({
        id: i + 1,
        text: "",
        link: "",
        img: `images/block${i + 1}.png`
    }));

    // ëª…ì‹œëœ ì´ˆê¸° ë¬¸êµ¬ ì„¤ì •
    blocks[0].text = "ë‚¨ì„±íƒ€ì›Œ";
    blocks[1].text = "ì—¬ì„±íƒ€ì›Œ";
    blocks[2].text = "ëª¨ë¸í•˜ìš°ìŠ¤";
    blocks[2].link = "https://www.band.us/";
    blocks[5].text = "ìë™ì°¨íƒ€ì›Œ";
    blocks[8].text = "ë°´ë“œíƒ€ì›Œ";

    const mainGrid = document.getElementById('mainGrid');

    function render() {
        mainGrid.innerHTML = '';
        const viewport = document.getElementById('app-viewport');
        isAdmin ? viewport.classList.add('admin-active') : viewport.classList.remove('admin-active');

        blocks.forEach((block, idx) => {
            const div = document.createElement('div');
            div.className = 'tower-block';
            
            // ì¼ë°˜ëª¨ë“œì—ì„œëŠ” ë¬¸êµ¬/ê°€ì´ë“œë¼ì¸ ìˆ¨ê¹€ ë¡œì§
            const showText = isAdmin || block.text !== "";
            const textContent = showText ? block.text : "";

            div.innerHTML = `
                <div class="img-wrapper" onclick="handleBlockClick(${idx})">
                    <img src="${block.img}" onerror="this.style.opacity='0'" alt="">
                </div>
                <div class="tower-label">${textContent}</div>
            `;
            mainGrid.appendChild(div);
        });
    }

    function handleBlockClick(idx) {
        if (isAdmin) {
            selectedIdx = idx;
            document.getElementById('input-text').value = blocks[idx].text;
            document.getElementById('input-link').value = blocks[idx].link;
            document.getElementById('admin-panel').style.display = 'block';
        } else {
            if (blocks[idx].link) {
                window.open(blocks[idx].link, '_blank');
            }
        }
    }

    function toggleMode() {
        isAdmin = !isAdmin;
        render();
    }

    function saveEdit() {
        blocks[selectedIdx].text = document.getElementById('input-text').value;
        blocks[selectedIdx].link = document.getElementById('input-link').value;
        closePanel();
        render();
    }

    function closePanel() {
        document.getElementById('admin-panel').style.display = 'none';
    }

    // ì´ˆê¸° ì‹¤í–‰
    render();
</script>

</body>
</html>